import{e as R,r as B,f as q,h as E}from"./requests-BJ8Q--BS.js";import{g as v,f as D,c as A,a as o,w as t,b,r as d,o as L,d as m}from"./index-BrkTj9za.js";const T={class:"content"},j={class:"dialog-footer"},z={class:"dialog-footer"},J={__name:"rolelists",setup(G){const V=v(),g=v(),l=D({userlist:[],dialogFormVisible:!1,formdata:{roleName:"",roleDesc:""},dialogFormVisible1:!1,formdata1:{roleName:"",roleDesc:"",id:""}}),n=()=>{R().then(r=>{r.data&&(l.userlist=r.data)})},k=()=>{l.dialogFormVisible=!0},_=D({roleName:[{required:!0,message:"请输入角色名",trigger:"blur"},{min:3,max:10,message:"长度应该为3-10",trigger:"blur"}],roleDesc:[{required:!1,message:"请输入角色描述",trigger:"blur"}]}),y=r=>{r.validate(e=>{if(e)B(l.formdata).then(i=>{i.data&&(l.dialogFormVisible=!1,l.formdata={roleName:"",roleDesc:""},n())});else return})},C=r=>{l.dialogFormVisible1=!0,l.formdata1.roleName=r.roleName,l.formdata1.roleDesc=r.roleDesc,l.formdata1.id=r.id},c=r=>{r.validate(e=>{if(e)q(l.formdata1).then(i=>{i.data&&(l.dialogFormVisible1=!1,l.formdata1={roleName:"",roleDesc:""},n())});else return})},w=r=>{E(r).then(e=>{e.meta&&n()})};return n(),(r,e)=>{const i=d("el-breadcrumb-item"),U=d("el-breadcrumb"),s=d("el-button"),p=d("el-table-column"),$=d("el-table"),u=d("el-input"),f=d("el-form-item"),F=d("el-form"),N=d("el-dialog");return L(),A("div",null,[o(U,null,{default:t(()=>[o(i,{to:{path:"/role"}},{default:t(()=>e[10]||(e[10]=[m("首页")])),_:1}),o(i,{to:{path:"/role"},class:"title"},{default:t(()=>e[11]||(e[11]=[m("角色列表")])),_:1})]),_:1}),b("div",T,[o(s,{type:"primary",class:"button",onClick:k},{default:t(()=>e[12]||(e[12]=[m("新建角色")])),_:1})]),o($,{data:l.userlist,style:{width:"100%"}},{default:t(()=>[o(p,{prop:"roleName",label:"角色名",width:"380"}),o(p,{prop:"roleDesc",label:"角色描述",width:"380"}),o(p,{label:"操作"},{default:t(a=>[o(s,{type:"primary",onClick:x=>C(a.row)},{default:t(()=>e[13]||(e[13]=[m("编辑")])),_:2},1032,["onClick"]),o(s,{type:"danger",onClick:x=>w(a.row)},{default:t(()=>e[14]||(e[14]=[m("删除")])),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data"]),o(N,{modelValue:l.dialogFormVisible,"onUpdate:modelValue":e[4]||(e[4]=a=>l.dialogFormVisible=a),title:"新增用户",width:"500"},{footer:t(()=>[b("div",j,[o(s,{onClick:e[2]||(e[2]=a=>l.dialogFormVisible=!1)},{default:t(()=>e[15]||(e[15]=[m("取消")])),_:1}),o(s,{type:"primary",onClick:e[3]||(e[3]=a=>y(V.value))},{default:t(()=>e[16]||(e[16]=[m("确定")])),_:1})])]),default:t(()=>[o(F,{model:l.formdata,rules:_,ref_key:"roleForm",ref:V},{default:t(()=>[o(f,{label:"角色名",prop:"roleName"},{default:t(()=>[o(u,{modelValue:l.formdata.roleName,"onUpdate:modelValue":e[0]||(e[0]=a=>l.formdata.roleName=a),placeholder:"请输入角色名"},null,8,["modelValue"])]),_:1}),o(f,{label:"角色描述",prop:"roleDesc"},{default:t(()=>[o(u,{modelValue:l.formdata.roleDesc,"onUpdate:modelValue":e[1]||(e[1]=a=>l.formdata.roleDesc=a),placeholder:"请输入角色描述"},null,8,["modelValue"])]),_:1})]),_:1},8,["model","rules"])]),_:1},8,["modelValue"]),o(N,{modelValue:l.dialogFormVisible1,"onUpdate:modelValue":e[9]||(e[9]=a=>l.dialogFormVisible1=a),title:"新增用户",width:"500"},{footer:t(()=>[b("div",z,[o(s,{onClick:e[7]||(e[7]=a=>l.dialogFormVisible1=!1)},{default:t(()=>e[17]||(e[17]=[m("取消")])),_:1}),o(s,{type:"primary",onClick:e[8]||(e[8]=a=>c(g.value))},{default:t(()=>e[18]||(e[18]=[m("确定")])),_:1})])]),default:t(()=>[o(F,{model:l.formdata1,rules:_,ref_key:"roleForm1",ref:g},{default:t(()=>[o(f,{label:"角色名",prop:"roleName"},{default:t(()=>[o(u,{modelValue:l.formdata1.roleName,"onUpdate:modelValue":e[5]||(e[5]=a=>l.formdata1.roleName=a),placeholder:"请输入角色名"},null,8,["modelValue"])]),_:1}),o(f,{label:"角色描述",prop:"roleDesc"},{default:t(()=>[o(u,{modelValue:l.formdata1.roleDesc,"onUpdate:modelValue":e[6]||(e[6]=a=>l.formdata1.roleDesc=a),placeholder:"请输入角色描述"},null,8,["modelValue"])]),_:1})]),_:1},8,["model","rules"])]),_:1},8,["modelValue"])])}}};export{J as default};
